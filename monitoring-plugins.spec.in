Name: monitoring-plugins
Version: @PACKAGE_VERSION@
Release: @RELEASE@
Summary: Host/service/network monitoring program plugins for Sensu/Icinga/Nagios etc..
Group: Applications/System
License: GPL

URL: https://www.monitoring-plugins.org/
Source: https://www.monitoring-plugins.org/download/%{name}-%{version}.tar.gz

Packager: Rob Thomas <xrobau@gmail.com>

Vendor: Monitoring Plugins Development Team
Provides: monitoring-plugins

Requires:	perl
Requires:	net-snmp-perl

BuildRequires:	bind-utils
BuildRequires:	coreutils
BuildRequires:	iputils
BuildRequires:	mysql-devel
BuildRequires:	net-snmp-utils
BuildRequires:	net-tools
BuildRequires:	ntp
BuildRequires:	openldap-devel
BuildRequires:	openssh-clients
BuildRequires:	openssl-devel
BuildRequires:	postgresql-devel
BuildRequires:	procps
BuildRequires:	samba-client
BuildRequires:	/usr/bin/mailq

# Don't let rpmbuild try to figure out the dependancies.
# It's far too confusing for it.
AutoReqProv: no

%description
The Monitoring Plugins Development Team  maintain a bundle of more than
fifty standard plugins for Icinga, Naemon, Nagios, Shinken, Sensu, and
other monitoring applications. Each plugin is a stand-alone command line
tool that provides a specific type of check. Typically, your monitoring
software runs these plugins to determine the current status of hosts and
services on your network.

Note that this package explicitly excludes check_radius, and is not
currently available in a package. You'll need to build it from source.
%prep
%setup -q

%build
%configure --with-cgiurl="/monitoring/cgi-bin" --without-radius
%{__make} %{?_smp_mflags}

%install
rm -rf $RPM_BUILD_ROOT
make install DESTDIR=$RPM_BUILD_ROOT
make install-root DESTDIR=$RPM_BUILD_ROOT

# check_radius is explicitly removed from this
# package, as it relies on a lot of un-packaged
# things. I will revisit in a later release.
# --xrobau 20140801
%{__rm} -f $RPM_BUILD_ROOT/usr/libexec/check_radius

%clean
%{__rm} -rf $RPM_BUILD_ROOT

%files
%defattr(-, root, root, 0755)
%doc ABOUT-NLS ACKNOWLEDGEMENTS AUTHORS ChangeLog CODING COPYING FAQ INSTALL LEGAL
%doc NEWS README REQUIREMENTS SUPPORT THANKS
%{_libexecdir}/check_apt
%{_libexecdir}/check_breeze
%{_libexecdir}/check_by_ssh
%{_libexecdir}/check_clamd
%{_libexecdir}/check_cluster
%{_libexecdir}/check_dig
%{_libexecdir}/check_disk
%{_libexecdir}/check_disk_smb
%{_libexecdir}/check_dns
%{_libexecdir}/check_dummy
%{_libexecdir}/check_file_age
%{_libexecdir}/check_flexlm
%{_libexecdir}/check_ftp
%{_libexecdir}/check_hpjd
%{_libexecdir}/check_http
%{_libexecdir}/check_ide_smart
%{_libexecdir}/check_ifoperstatus
%{_libexecdir}/check_ifstatus
%{_libexecdir}/check_imap
%{_libexecdir}/check_ircd
%{_libexecdir}/check_jabber
%{_libexecdir}/check_ldap
%{_libexecdir}/check_ldaps
%{_libexecdir}/check_load
%{_libexecdir}/check_log
%{_libexecdir}/check_mailq
%{_libexecdir}/check_mrtg
%{_libexecdir}/check_mrtgtraf
%{_libexecdir}/check_mysql
%{_libexecdir}/check_mysql_query
%{_libexecdir}/check_nagios
%{_libexecdir}/check_nntp
%{_libexecdir}/check_nntps
%{_libexecdir}/check_nt
%{_libexecdir}/check_ntp
%{_libexecdir}/check_ntp_peer
%{_libexecdir}/check_ntp_time
%{_libexecdir}/check_nwstat
%{_libexecdir}/check_oracle
%{_libexecdir}/check_overcr
%{_libexecdir}/check_pgsql
%{_libexecdir}/check_ping
%{_libexecdir}/check_pop
%{_libexecdir}/check_procs
%{_libexecdir}/check_real
%{_libexecdir}/check_rpc
%{_libexecdir}/check_sensors
%{_libexecdir}/check_simap
%{_libexecdir}/check_smtp
%{_libexecdir}/check_snmp
%{_libexecdir}/check_spop
%{_libexecdir}/check_ssh
%{_libexecdir}/check_ssmtp
%{_libexecdir}/check_swap
%{_libexecdir}/check_tcp
%{_libexecdir}/check_time
%{_libexecdir}/check_udp
%{_libexecdir}/check_ups
%{_libexecdir}/check_users
%{_libexecdir}/check_wave
%{_libexecdir}/negate
%{_libexecdir}/urlize
%{_libexecdir}/utils.pm
%{_libexecdir}/utils.sh
%lang(de) %{_datadir}/locale/de/LC_MESSAGES/monitoring-plugins.mo
%lang(fr) %{_datadir}/locale/fr/LC_MESSAGES/monitoring-plugins.mo
# Setuid Root files
%attr(4755, root, root) %{_libexecdir}/check_dhcp
%attr(4755, root, root) %{_libexecdir}/check_icmp

%changelog
* Fri Aug 01 2014 Rob Thomas <xrobau@gmail.com> - 2.0.0-1
- Almost complete rewrite

